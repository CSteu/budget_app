import{_ as c,B as u,c as n,b as s,t as g,w as d,v as l,q as f,g as m,m as p,a}from"./index-DBqlTuQu.js";const w={name:"AuthPage",data(){return{isLoginMode:!0,credentials:{username:"",email:"",password:""},confirmPassword:""}},methods:{toggleMode(){this.isLoginMode=!this.isLoginMode,this.credentials={username:"",email:"",password:""},this.confirmPassword=""},async onSubmit(){var r;try{if(this.isLoginMode)await this.loginUser();else{if(this.credentials.password!==this.confirmPassword){alert("Passwords do not match. Please try again.");return}await this.registerUser()}}catch(e){console.error(`${this.isLoginMode?"Login":"Registration"} failed`,(r=e.response)==null?void 0:r.data),alert(`${this.isLoginMode?"Login":"Registration"} failed`)}},async loginUser(){const r=await u.post("/login",{email:this.credentials.email,password:this.credentials.password});localStorage.setItem("authToken",r.data.accessToken),this.$router.push("/")},async registerUser(){await u.post("/register",{username:this.credentials.username,email:this.credentials.email,password:this.credentials.password}),alert("Registration successful!"),this.toggleMode()}}},h={class:"auth-container"},M={class:"form-field"},y={class:"form-field"},L={key:0,class:"form-field"},v={class:"form-actions"},b={type:"submit",class:"submit-button"},P={class:"mode-toggle"},k={key:0},S={key:1};function U(r,e,V,_,i,t){return a(),n("div",h,[s("h2",null,g(i.isLoginMode?"Secured Login":"Registration"),1),s("form",{onSubmit:e[3]||(e[3]=m((...o)=>t.onSubmit&&t.onSubmit(...o),["prevent"])),class:"form"},[s("div",M,[e[6]||(e[6]=s("label",{for:"email"},"Email",-1)),d(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.credentials.email=o),type:"email",required:"",class:"input-field",placeholder:"Enter your email"},null,512),[[l,i.credentials.email]])]),s("div",y,[e[7]||(e[7]=s("label",{for:"password"},"Password",-1)),d(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>i.credentials.password=o),type:"password",required:"",class:"input-field",placeholder:"Enter your password"},null,512),[[l,i.credentials.password]])]),i.isLoginMode?f("",!0):(a(),n("div",L,[e[8]||(e[8]=s("label",{for:"confirmPassword"},"Confirm Password",-1)),d(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=o=>i.confirmPassword=o),type:"password",required:"",class:"input-field",placeholder:"Confirm your password"},null,512),[[l,i.confirmPassword]])])),s("div",v,[s("button",b,g(i.isLoginMode?"Login":"Register"),1)])],32),s("p",P,[i.isLoginMode?(a(),n("span",k,[e[9]||(e[9]=p(" Don't have an account? ")),s("a",{href:"#",onClick:e[4]||(e[4]=m((...o)=>t.toggleMode&&t.toggleMode(...o),["prevent"]))},"Register here")])):(a(),n("span",S,[e[10]||(e[10]=p(" Already have an account? ")),s("a",{href:"#",onClick:e[5]||(e[5]=m((...o)=>t.toggleMode&&t.toggleMode(...o),["prevent"]))},"Login here")]))])])}const x=c(w,[["render",U],["__scopeId","data-v-60447081"]]);export{x as default};
